<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>nara</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.10/dayjs.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.10/plugin/relativeTime.min.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/d3@7/dist/d3.min.js"></script>
    <style>
    body {
      font-family: Helvetica Neue;
    }
    th, td {
      min-width: 5em;
      text-align: left;
      padding: 8px;
    }
    tr:nth-child(even) {
      background-color: #f9f9f9;
    }
    .name { font-weight: bold; }
    a { text-decoration: none; color: black; }
    a:hover { text-decoration: underline; color: #007bff; }

    /* Shooting Star Magic */
    .shooting-star-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 9999;
    }

    .shooting-star {
      position: absolute;
      padding: 12px 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 25px;
      font-size: 14px;
      font-weight: 500;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      animation: shootingStar 2s ease-out forwards;
      white-space: nowrap;
    }

    .shooting-star::before {
      content: 'âœ¨';
      margin-right: 8px;
    }

    .shooting-star::after {
      content: '';
      position: absolute;
      top: 50%;
      right: 100%;
      width: 100px;
      height: 2px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8));
      transform: translateY(-50%);
      animation: trail 2s ease-out forwards;
    }

    .shooting-star .actor {
      font-weight: bold;
      color: #ffd700;
    }

    .shooting-star .target {
      font-weight: bold;
      color: #ff69b4;
    }

    .shooting-star .arrow {
      margin: 0 6px;
      opacity: 0.7;
    }

    @keyframes shootingStar {
      0% {
        opacity: 0;
        transform: translateX(-100px) translateY(0) scale(0.8);
      }
      10% {
        opacity: 1;
        transform: translateX(0) translateY(0) scale(1);
      }
      70% {
        opacity: 1;
        transform: translateX(calc(100vw - 400px)) translateY(-50px) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateX(calc(100vw + 100px)) translateY(-80px) scale(0.6);
      }
    }

    @keyframes trail {
      0% { width: 0; opacity: 0; }
      10% { width: 50px; opacity: 0.8; }
      70% { width: 150px; opacity: 0.5; }
      100% { width: 200px; opacity: 0; }
    }

    /* Sparkle particles */
    .sparkle {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      pointer-events: none;
      animation: sparkle 0.8s ease-out forwards;
    }

    .sparkle.gold { background: #ffd700; box-shadow: 0 0 6px #ffd700; }
    .sparkle.pink { background: #ff69b4; box-shadow: 0 0 6px #ff69b4; }
    .sparkle.white { background: #ffffff; box-shadow: 0 0 6px #ffffff; }
    .sparkle.purple { background: #a855f7; box-shadow: 0 0 6px #a855f7; }

    @keyframes sparkle {
      0% {
        transform: scale(0) rotate(0deg);
        opacity: 0;
      }
      20% {
        transform: scale(1.2) rotate(90deg);
        opacity: 1;
      }
      100% {
        transform: scale(0) rotate(180deg) translateY(-30px);
        opacity: 0;
      }
    }

    /* Star burst effect on appear */
    .shooting-star.burst::before {
      animation: burst 0.5s ease-out forwards;
    }

    @keyframes burst {
      0% { transform: scale(1); }
      50% { transform: scale(1.5); }
      100% { transform: scale(1); }
    }

    /* Glitter trail */
    .glitter-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
    }

    /* Network Map Styles */
    .network-map-container {
      margin: 20px 0;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
      border: 1px solid #e9ecef;
    }

    .network-map-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .network-map-header h3 {
      margin: 0;
      font-size: 16px;
      color: #333;
    }

    .network-map-toggle {
      padding: 6px 12px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
    }

    .network-map-toggle:hover {
      background: #5a67d8;
    }

    .network-map svg {
      background: #1a1a2e;
      border-radius: 6px;
    }

    .network-map .node-circle {
      stroke: #fff;
      stroke-width: 1.5;
    }

    .network-map .node-circle.self {
      stroke: #ffd700;
      stroke-width: 3;
    }

    .network-map .node-label {
      font-size: 10px;
      fill: #fff;
      text-anchor: middle;
      pointer-events: none;
    }

    .network-map .node-tooltip {
      position: absolute;
      padding: 8px 12px;
      background: rgba(0, 0, 0, 0.85);
      color: white;
      border-radius: 4px;
      font-size: 12px;
      pointer-events: none;
      white-space: nowrap;
      z-index: 100;
    }

    .network-map-legend {
      display: flex;
      gap: 15px;
      margin-top: 10px;
      font-size: 11px;
      color: #666;
    }

    .network-map-legend span {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    .legend-dot.online { background: #48bb78; }
    .legend-dot.offline { background: #a0aec0; }
    .legend-dot.self { background: #ffd700; border: 2px solid #fff; }

    .nara-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 1px solid rgba(0, 0, 0, 0.08);
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), rgba(255,255,255,0.2));
      box-shadow: 0 6px 12px rgba(0,0,0,0.08);
      flex: 0 0 auto;
    }

    .nara-avatar-placeholder {
      background: radial-gradient(circle at 40% 35%, rgba(255,255,255,0.75), rgba(220,220,220,0.45) 45%, rgba(200,200,200,0.25) 70%, rgba(180,180,180,0.08));
      border: 1px solid rgba(120,120,120,0.15);
      box-shadow: 0 6px 14px rgba(0,0,0,0.06);
      filter: blur(0.2px) saturate(0.6);
    }

    /* Aura pulse animation for high-buzz naras */
    @keyframes aura-pulse {
      0% {
        box-shadow: 0 0 var(--glow-blur, 4px) var(--primary-color, #888);
        transform: scale(1);
      }
      50% {
        box-shadow: 0 0 calc(var(--glow-blur, 4px) * 1.5) var(--primary-color, #888);
        transform: scale(1.1);
      }
      100% {
        box-shadow: 0 0 var(--glow-blur, 4px) var(--primary-color, #888);
        transform: scale(1);
      }
    }
  </style>
  </head>
  <body>
    <div style="display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-bottom:1px solid #eee; font-family: Helvetica Neue;">
      <div style="font-weight:600;">nara</div>
      <div style="display:flex; gap:14px; font-size:14px;">
        <a href="/resources.html">resource usage</a>
      </div>
    </div>
    <div id="naras_container"></div>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="nara-avatar.js" type="text/babel"></script>
  <script src="nara.js" type="text/babel"></script>
  </body>
</html>
